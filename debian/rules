#!/usr/bin/make -f

include /usr/share/cdbs/1/rules/simple-patchsys.mk
include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/gnome.mk
include /usr/share/cdbs/1/rules/utils.mk
include /usr/share/gnome-pkg-tools/1/rules/uploaders.mk
-include /usr/share/gnome-pkg-tools/1/rules/gnome-get-source.mk

DEB_CONFIGURE_EXTRA_FLAGS := --enable-icon-mapping

post-patches::
	if [ -d debian/patched-icons ]; then \
		for i in $$(find debian/patched-icons/ -name '*.uue'); do \
			iconname=$${i##debian/patched-icons/}; \
			mv $${iconname%.uue} $${iconname%.uue}.old; \
			uudecode $$i -o $${iconname%.uue}; \
		done; \
	fi


clean::
	if [ -d debian/patched-icons ]; then \
		for i in $$(find debian/patched-icons/ -name '*.uue'); do \
			iconname=$${i##debian/patched-icons/}; \
			mv $${iconname%.uue}.old; $${iconname%.uue}; \
			rm $${i%.uue}; \
		done; \
	fi
